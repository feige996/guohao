<script setup lang="ts">
import SummaryCard from './components/SummaryCard.vue'
// æ‚£è€…ä¿¡æ¯åˆ—è¡¨
const patientList = [
  {
    id: 1,
    name: 'ç‹å†›',
    gender: 'ç”·',
    disease: '2å‹ç³–å°¿ç—…',
    lastVisit: '6æœˆ10æ—¥',
    timestamp: '2025/02/11 14:32:21',
    avatar: 'https://randomuser.me/api/portraits/men/32.jpg',
    type: 'å¤è¯Š',
  },
  {
    id: 2,
    name: 'åˆ˜è‰³',
    gender: 'å¥³',
    disease: '2å‹ç³–å°¿ç—…',
    lastVisit: '6æœˆ10æ—¥',
    timestamp: '2025/02/11 14:32:21',
    avatar: 'https://randomuser.me/api/portraits/women/44.jpg',
    type: 'å¤è¯Š',
  },
]

// å¤„ç†æ‚£è€…ç‚¹å‡»
function handlePatientClick(patientId: number) {
  console.log('æŸ¥çœ‹æ‚£è€…è¯¦æƒ…:', patientId)
  // è¿™é‡Œå¯ä»¥æ·»åŠ è·³è½¬åˆ°æ‚£è€…è¯¦æƒ…é¡µçš„é€»è¾‘
}

// å¤„ç†åŠŸèƒ½å¡ç‰‡ç‚¹å‡»
function handleCardClick(type: string) {
  console.log('ç‚¹å‡»å¡ç‰‡ç±»å‹:', type)
  // è¿™é‡Œå¯ä»¥æ·»åŠ è·³è½¬åˆ°å¯¹åº”é¡µé¢çš„é€»è¾‘
}

// æœç´¢å¤„ç†
function handleSearch(keyword: string) {
  console.log('æœç´¢å…³é”®è¯:', keyword)
  // è¿™é‡Œå¯ä»¥æ·»åŠ æœç´¢é€»è¾‘
}
</script>

<template>
  <view class="min-h-screen bg-gray-50 px-3">
    <!-- æœç´¢æ  -->
    <view class="bg-white px-4 pb-2 pt-2">
      <view class="relative">
        <input
          type="text"
          placeholder="æœç´¢æ‚£è€…åç§°/ç–¾ç—…"
          class="h-10 w-full rounded-full bg-gray-100 pl-10 pr-4 text-sm focus:outline-none"
          @confirm="handleSearch($event.target.value)"
        >
        <text class="absolute left-3 top-1/2 transform text-gray-400 -translate-y-1/2">ğŸ”</text>
        <button class="absolute right-2 top-1/2 transform rounded-full bg-amber-700 px-3 py-1 text-sm text-white -translate-y-1/2">
          æœç´¢
        </button>
      </view>
    </view>

    <!-- æ‚£è€…æ•°æ®ç»Ÿè®¡ -->
    <SummaryCard class="mt-3" />

    <!-- åŠŸèƒ½å¡ç‰‡ -->
    <FunctionCard class="mt-3" />

    <!-- æ‚£è€…åˆ—è¡¨ -->
    <view class="mt-4 px-4">
      <view class="mb-2 flex items-center justify-between">
        <text class="text-lg font-semibold">æ–°å¢æ‚£è€…</text>
      </view>

      <!-- æ‚£è€…åˆ—è¡¨é¡¹ -->
      <view class="space-y-3">
        <template v-for="patient in patientList" :key="patient.id">
          <view class="rounded-lg bg-white p-3 shadow-sm" @click="handlePatientClick(patient.id)">
            <view class="flex items-start">
              <image :src="patient.avatar" class="mr-3 h-12 w-12 rounded-lg" mode="aspectFill" />
              <view class="flex-1">
                <view class="flex items-center">
                  <text class="text-base font-semibold">{{ patient.name }}</text>
                  <text class="ml-2 text-xs text-gray-500">{{ patient.gender }}</text>
                </view>
                <view class="mt-1 flex items-center">
                  <text class="rounded bg-blue-100 px-1.5 py-0.5 text-xs text-blue-700">
                    {{ patient.type }}
                  </text>
                  <text class="ml-2 text-sm text-gray-600">{{ patient.disease }}</text>
                </view>
                <text class="mt-1 text-xs text-gray-400">ä¸Šæ¬¡é—®è¯Š: {{ patient.lastVisit }}</text>
                <text class="text-xs text-gray-400">{{ patient.timestamp }}</text>
              </view>
            </view>

            <view class="mt-3 flex space-x-2">
              <button class="flex-1 rounded-md bg-red-500 py-1.5 text-sm text-white">
                å›¾æ–‡é—®è¯Š
              </button>
              <button class="flex-1 rounded-md bg-amber-500 py-1.5 text-sm text-white">
                å¥åº·æ¡£æ¡ˆ
              </button>
              <button class="flex-1 rounded-md bg-green-500 py-1.5 text-sm text-white">
                å‘é€æé†’
              </button>
            </view>
          </view>
        </template>
      </view>
    </view>

    <!-- åº•éƒ¨ç©ºé—´ -->
    <view class="h-20" />
  </view>
</template>
