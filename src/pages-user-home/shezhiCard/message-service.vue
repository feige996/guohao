<script setup lang="ts">
import { ref } from 'vue'
import ChatEntry from './chat-entry.vue'
import '@dcloudio/uni-app'

const activeTab = ref('customer-service') // customer-service æˆ– my-messages

// åˆ‡æ¢æ ‡ç­¾
function switchTab(tab: string) {
  activeTab.value = tab
}
</script>

<template>
  <view class="message-service-container min-h-screen bg-gray-50">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <view class="header sticky top-0 z-10 bg-white shadow-sm">
      <!-- æ ‡ç­¾æ  -->
      <view class="flex border-b">
        <view
          class="flex-1 py-3 text-center"
          :class="activeTab === 'customer-service' ? 'border-b-2 border-blue-500 text-blue-500' : 'text-gray-600'"
          @tap="switchTab('customer-service')"
        >
          åœ¨çº¿å®¢æœ
        </view>
        <view
          class="flex-1 py-3 text-center"
          :class="activeTab === 'my-messages' ? 'border-b-2 border-blue-500 text-blue-500' : 'text-gray-600'"
          @tap="switchTab('my-messages')"
        >
          æˆ‘çš„æ¶ˆæ¯
        </view>
      </view>
    </view>

    <!-- å†…å®¹åŒºåŸŸ -->
    <view class="content p-4">
      <!-- åœ¨çº¿å®¢æœåŒºåŸŸ -->
      <view v-if="activeTab === 'customer-service'" class="space-y-4">
        <!-- å®¢æœä»‹ç»å¡ç‰‡ -->
        <view class="rounded-lg bg-white p-4 shadow-sm">
          <view class="mb-3 flex items-center">
            <view class="mr-3 h-12 w-12 flex items-center justify-center rounded-full bg-blue-100">
              <text class="text-2xl text-blue-500">ğŸ‘¨â€ğŸ’¼</text>
            </view>
            <view>
              <text class="block text-lg font-medium">ä¸“ä¸šå®¢æœå›¢é˜Ÿ</text>
              <text class="text-sm text-gray-500">å·¥ä½œæ—¶é—´ï¼š9:00-18:00</text>
            </view>
          </view>
          <text class="text-sm text-gray-600">
            æˆ‘ä»¬çš„å®¢æœå›¢é˜Ÿéšæ—¶ä¸ºæ‚¨æä¾›å¸®åŠ©ï¼Œè§£ç­”æ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„ä»»ä½•é—®é¢˜ã€‚
          </text>
        </view>

        <!-- å¸¸è§é—®é¢˜å¡ç‰‡ -->
        <view class="rounded-lg bg-white p-4 shadow-sm">
          <text class="mb-3 block text-base font-medium">å¸¸è§é—®é¢˜</text>
          <view class="space-y-3">
            <view class="flex items-center text-sm text-gray-600">
              <text class="mr-2 text-blue-500">â€¢</text>
              <text>å¦‚ä½•ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼Ÿ</text>
            </view>
            <view class="flex items-center text-sm text-gray-600">
              <text class="mr-2 text-blue-500">â€¢</text>
              <text>å¦‚ä½•ç”³è¯·é€€æ¬¾ï¼Ÿ</text>
            </view>
            <view class="flex items-center text-sm text-gray-600">
              <text class="mr-2 text-blue-500">â€¢</text>
              <text>å¦‚ä½•æŸ¥çœ‹å†å²è®¢å•ï¼Ÿ</text>
            </view>
          </view>
        </view>

        <!-- è”ç³»å®¢æœæŒ‰é’® -->
        <button
          class="w-full rounded-lg bg-blue-500 py-3 text-base text-white font-medium"
          @tap="uni.navigateTo({ url: '/pages-user-home/shezhiCard/chat' })"
        >
          ç«‹å³å’¨è¯¢
        </button>
      </view>

      <!-- æˆ‘çš„æ¶ˆæ¯åŒºåŸŸ -->
      <view v-else class="space-y-4">
        <!-- æ¶ˆæ¯å…¥å£ç»„ä»¶ -->
        <ChatEntry />

        <!-- æ¶ˆæ¯è®¾ç½®æç¤º -->
        <view class="border border-yellow-100 rounded-lg bg-yellow-50 p-4">
          <view class="flex items-start">
            <text class="mr-2 text-lg text-yellow-500">âš ï¸</text>
            <view class="text-sm text-gray-700">
              <text class="mb-1 block font-medium">æ¶ˆæ¯é€šçŸ¥è®¾ç½®</text>
              <text>è¯·ç¡®ä¿æ‚¨å·²å¼€å¯æ¶ˆæ¯é€šçŸ¥æƒé™ï¼Œä»¥ä¾¿åŠæ—¶æ”¶åˆ°æ–°æ¶ˆæ¯æé†’ã€‚</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>
