<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>问诊详情 - 医疗问诊系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        
        .toast {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            max-width: 300px;
            text-align: center;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* 折叠内容 */
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .collapsible-content.expanded {
            max-height: 2000px;
        }

        /* 图片预览 */
        .image-preview {
            cursor: pointer;
            transition: transform 0.2s;
        }

        .image-preview:hover {
            transform: scale(1.05);
        }

        /* 图片查看器 */
        .image-viewer {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 20px;
        }

        .image-viewer.active {
            display: flex;
        }

        .image-viewer img {
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
        }
    </style>
</head>
<body class="bg-[#F9FAFB]">
    <div class="w-full  mx-auto min-h-screen relative pb-[80px]">
        <!-- Toast 通知 -->
        <div id="toast" class="toast"></div>

        <!-- 图片查看器 -->
        <div id="imageViewer" class="image-viewer" onclick="closeImageViewer()">
            <img id="viewerImage" src="" alt="查看图片">
        </div>

        <!-- 顶部导航 -->
        <header class="w-full h-[56px] flex justify-between items-center px-4 bg-white fixed top-0 left-0 right-0  mx-auto z-50 shadow-sm">
            <button class="text-[#333333] hover:text-[#6B7280] transition-colors" onclick="goBack()" aria-label="返回上一页">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                    <path fill-rule="evenodd" d="M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z" clip-rule="evenodd" />
                </svg>
            </button>
            <h1 class="text-[#1F2937] text-lg font-bold">问诊详情</h1>
            <button class="text-[#8E4337] hover:text-[#6E2F25] transition-colors" onclick="showMoreOptions()" aria-label="更多操作">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                    <path fill-rule="evenodd" d="M4.5 12a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm6 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm6 0a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z" clip-rule="evenodd" />
                </svg>
            </button>
        </header>

        <!-- 主内容区 -->
        <main class="pt-[64px] px-4 space-y-4">
            
            <!-- 患者基本信息 -->
            <section class="w-full p-5 rounded-[20px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.06)] bg-white border border-[#F3F4F6]">
                <div class="flex items-center gap-3">
                    <div class="relative">
                        <div class="w-16 h-16 rounded-full overflow-hidden flex-shrink-0 ring-2 ring-[#F5EBE9]">
                            <img src="https://cdn.pixabay.com/photo/2017/03/14/03/20/woman-2141808_640.jpg" alt="王女士" class="w-full h-full object-cover">
                        </div>
                        <!-- 性别标识 -->
                        <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-[#EC4899] rounded-full flex items-center justify-center border-2 border-white">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="white" class="w-3 h-3">
                                <path d="M8 1a3.5 3.5 0 0 0-3.5 3.5c0 1.41.84 2.617 2.042 3.165L5.5 9.537a.75.75 0 0 0 .75.75h.214l-.549 3.285a.75.75 0 0 0 1.48.247l.65-3.907h.91l.65 3.907a.75.75 0 0 0 1.48-.247l-.55-3.285h.215a.75.75 0 0 0 .75-.75l-1.042-1.872A3.5 3.5 0 0 0 11.5 4.5 3.5 3.5 0 0 0 8 1Z" />
                            </svg>
                        </div>
                    </div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-[#1F2937] text-lg font-bold">王女士</span>
                            <span class="text-[#6B7280] text-sm">28岁</span>
                        </div>
                        <div class="text-[#6B7280] text-xs">患者编号：GH973212</div>
                    </div>
                    <button 
                        onclick="viewMedicalRecord()"
                        class="px-3 py-1.5 bg-[#F5EBE9] rounded-lg text-[#8E4337] text-xs font-medium hover:bg-[#E5D5D0] transition-colors flex items-center gap-1"
                        aria-label="查看病历">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3.5 h-3.5">
                            <path d="M3 3.5A1.5 1.5 0 014.5 2h6.879a1.5 1.5 0 011.06.44l4.122 4.12A1.5 1.5 0 0117 7.622V16.5a1.5 1.5 0 01-1.5 1.5h-11A1.5 1.5 0 013 16.5v-13z" />
                        </svg>
                        病历
                    </button>
                </div>
            </section>

            <!-- 问诊信息 -->
            <section class="w-full p-5 rounded-[20px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.06)] bg-white">
                <div class="flex items-center gap-2 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-[18px] h-[18px]">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-[#333333] text-lg font-bold leading-7">问诊信息</span>
                </div>

                <div class="space-y-3">
                    <!-- 问诊类型 -->
                    <div class="flex items-center justify-between py-2 border-b border-[#E5E7EB]">
                        <span class="text-[#6B7280] text-sm">问诊类型</span>
                        <div class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-4 h-4">
                                <path d="M10 2c-1.716 0-3.408.106-5.07.31C3.806 2.45 3 3.414 3 4.517V17.25a.75.75 0 001.075.676L10 15.082l5.925 2.844A.75.75 0 0017 17.25V4.517c0-1.103-.806-2.068-1.93-2.207A41.403 41.403 0 0010 2z" />
                            </svg>
                            <span class="text-[#1F2937] text-sm font-medium">图文问诊</span>
                        </div>
                    </div>

                    <!-- 问诊状态 -->
                    <div class="flex items-center justify-between py-2 border-b border-[#E5E7EB]">
                        <span class="text-[#6B7280] text-sm">问诊状态</span>
                        <span class="px-2.5 py-1 bg-[#D1FAE5] rounded-full text-[#10B981] text-xs font-bold">已完成</span>
                    </div>

                    <!-- 问诊时间 -->
                    <div class="flex items-center justify-between py-2 border-b border-[#E5E7EB]">
                        <span class="text-[#6B7280] text-sm">问诊时间</span>
                        <span class="text-[#1F2937] text-sm font-medium">2025-10-26 14:30</span>
                    </div>

                    <!-- 问诊费用 -->
                    <div class="flex items-center justify-between py-2">
                        <span class="text-[#6B7280] text-sm">问诊费用</span>
                        <span class="text-[#8E4337] text-base font-bold">¥50</span>
                    </div>
                </div>
            </section>

            <!-- 主诉与现病史 -->
            <section class="w-full p-5 rounded-[20px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.06)] bg-white">
                <div class="flex items-center gap-2 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-[18px] h-[18px]">
                        <path d="M3 3.5A1.5 1.5 0 014.5 2h6.879a1.5 1.5 0 011.06.44l4.122 4.12A1.5 1.5 0 0117 7.622V16.5a1.5 1.5 0 01-1.5 1.5h-11A1.5 1.5 0 013 16.5v-13z" />
                    </svg>
                    <span class="text-[#333333] text-lg font-bold leading-7">主诉与现病史</span>
                </div>

                <div class="space-y-4">
                    <!-- 主诉 -->
                    <div>
                        <div class="text-[#374151] text-sm font-semibold mb-2">主诉</div>
                        <div class="p-3 bg-[#F9FAFB] rounded-xl border border-[#E5E7EB]">
                            <div class="text-[#1F2937] text-sm leading-relaxed">
                                头痛头晕伴乏力3天，加重1天。
                            </div>
                        </div>
                    </div>

                    <!-- 现病史 -->
                    <div>
                        <div class="text-[#374151] text-sm font-semibold mb-2">现病史</div>
                        <div class="p-3 bg-[#F9FAFB] rounded-xl border border-[#E5E7EB]">
                            <div class="text-[#1F2937] text-sm leading-relaxed">
                                患者3天前无明显诱因出现头痛头晕,伴乏力,未予重视。1天前症状加重,伴恶心,无呕吐,无发热,遂来我处就诊。自述近期工作压力较大,睡眠欠佳。
                            </div>
                        </div>
                    </div>

                    <!-- 症状图片 -->
                    <div>
                        <div class="text-[#374151] text-sm font-semibold mb-2">症状图片</div>
                        <div class="grid grid-cols-3 gap-2">
                            <div class="aspect-square rounded-lg overflow-hidden border border-[#E5E7EB] image-preview" onclick="viewImage('https://cdn.pixabay.com/photo/2017/10/04/09/56/laboratory-2815640_640.jpg')">
                                <img src="https://cdn.pixabay.com/photo/2017/10/04/09/56/laboratory-2815640_640.jpg" alt="症状图片1" class="w-full h-full object-cover">
                            </div>
                            <div class="aspect-square rounded-lg overflow-hidden border border-[#E5E7EB] image-preview" onclick="viewImage('https://cdn.pixabay.com/photo/2019/11/19/22/51/health-4638495_640.jpg')">
                                <img src="https://cdn.pixabay.com/photo/2019/11/19/22/51/health-4638495_640.jpg" alt="症状图片2" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 四诊信息 -->
            <section class="w-full p-5 rounded-[20px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.06)] bg-white">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-[18px] h-[18px]">
                            <path d="M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z" />
                            <path fill-rule="evenodd" d="M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                        </svg>
                        <span class="text-[#333333] text-lg font-bold leading-7">四诊信息</span>
                    </div>
                    <button 
                        onclick="toggleSection('fourDiagnosis')"
                        class="text-[#8E4337] hover:text-[#6E2F25] transition-colors"
                        aria-label="展开/折叠">
                        <svg id="fourDiagnosisIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 transition-transform">
                            <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>

                <div id="fourDiagnosis" class="collapsible-content expanded">
                    <div class="space-y-3">
                        <!-- 望诊 -->
                        <div class="p-3 bg-[#F9FAFB] rounded-xl">
                            <div class="flex items-center gap-2 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-4 h-4">
                                    <path d="M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z" />
                                    <path fill-rule="evenodd" d="M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                                </svg>
                                <span class="text-[#374151] text-sm font-semibold">望诊</span>
                            </div>
                            <div class="text-[#6B7280] text-sm leading-relaxed">
                                面色略苍白,精神欠佳,舌质淡红,苔薄白。
                            </div>
                        </div>

                        <!-- 闻诊 -->
                        <div class="p-3 bg-[#F9FAFB] rounded-xl">
                            <div class="flex items-center gap-2 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-4 h-4">
                                    <path d="M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z" />
                                    <path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z" />
                                </svg>
                                <span class="text-[#374151] text-sm font-semibold">闻诊</span>
                            </div>
                            <div class="text-[#6B7280] text-sm leading-relaxed">
                                语声低微,气短乏力,呼吸平稳。
                            </div>
                        </div>

                        <!-- 问诊 -->
                        <div class="p-3 bg-[#F9FAFB] rounded-xl">
                            <div class="flex items-center gap-2 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-4 h-4">
                                    <path d="M3.505 2.365A41.369 41.369 0 019 2c1.863 0 3.697.124 5.495.365 1.247.167 2.18 1.108 2.435 2.268a4.45 4.45 0 00-.577-.069 43.141 43.141 0 00-4.706 0C9.229 4.696 7.5 6.727 7.5 8.998v2.24c0 1.413.67 2.735 1.76 3.562l-2.98 2.98A.75.75 0 015 17.25v-3.443c-.501-.048-1-.106-1.495-.172C2.033 13.438 1 12.162 1 10.72V5.28c0-1.441 1.033-2.717 2.505-2.914z" />
                                    <path d="M14 6c-.762 0-1.52.02-2.271.062C10.157 6.148 9 7.472 9 8.998v2.24c0 1.519 1.147 2.839 2.71 2.935.214.013.428.024.642.034.2.009.385.09.518.224l2.35 2.35a.75.75 0 001.28-.531v-2.07c1.453-.195 2.5-1.463 2.5-2.915V8.998c0-1.526-1.157-2.85-2.729-2.936A41.645 41.645 0 0014 6z" />
                                </svg>
                                <span class="text-[#374151] text-sm font-semibold">问诊</span>
                            </div>
                            <div class="text-[#6B7280] text-sm leading-relaxed">
                                头痛以额部为主,胀痛为主,劳累后加重。伴头晕、乏力、纳差。睡眠差,入睡困难。大小便正常。
                            </div>
                        </div>

                        <!-- 切诊 -->
                        <div class="p-3 bg-[#F9FAFB] rounded-xl">
                            <div class="flex items-center gap-2 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-4 h-4">
                                    <path d="M15.98 1.804a1 1 0 00-1.96 0l-.24 1.192a1 1 0 01-.784.785l-1.192.238a1 1 0 000 1.962l1.192.238a1 1 0 01.785.785l.238 1.192a1 1 0 001.962 0l.238-1.192a1 1 0 01.785-.785l1.192-.238a1 1 0 000-1.962l-1.192-.238a1 1 0 01-.785-.785l-.238-1.192zM6.949 5.684a1 1 0 00-1.898 0l-.683 2.051a1 1 0 01-.633.633l-2.051.683a1 1 0 000 1.898l2.051.684a1 1 0 01.633.632l.683 2.051a1 1 0 001.898 0l.683-2.051a1 1 0 01.633-.633l2.051-.683a1 1 0 000-1.898l-2.051-.683a1 1 0 01-.633-.633L6.95 5.684zM13.949 13.684a1 1 0 00-1.898 0l-.184.551a1 1 0 01-.632.633l-.551.183a1 1 0 000 1.898l.551.183a1 1 0 01.633.633l.183.551a1 1 0 001.898 0l.184-.551a1 1 0 01.632-.633l.551-.183a1 1 0 000-1.898l-.551-.184a1 1 0 01-.633-.632l-.183-.551z" />
                                </svg>
                                <span class="text-[#374151] text-sm font-semibold">切诊</span>
                            </div>
                            <div class="text-[#6B7280] text-sm leading-relaxed">
                                脉象细弱,血压 110/70 mmHg。
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 诊断结果 -->
            <section class="w-full p-5 rounded-[20px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.06)] bg-white border-2 border-[#8E4337]">
                <div class="flex items-center gap-2 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-[18px] h-[18px]">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-[#333333] text-lg font-bold leading-7">诊断结果</span>
                </div>

                <div class="space-y-3">
                    <!-- 西医诊断 -->
                    <div class="p-4 bg-[#F5EBE9] rounded-xl">
                        <div class="text-[#6B7280] text-sm mb-1">西医诊断</div>
                        <div class="text-[#8E4337] text-base font-bold">紧张性头痛</div>
                    </div>

                    <!-- 中医诊断 -->
                    <div class="p-4 bg-[#FFF7ED] rounded-xl">
                        <div class="text-[#6B7280] text-sm mb-1">中医诊断</div>
                        <div class="text-[#EA580C] text-base font-bold">头痛（气血亏虚证）</div>
                    </div>

                    <!-- 辨证分析 -->
                    <div class="p-3 bg-[#F9FAFB] rounded-xl border border-[#E5E7EB]">
                        <div class="text-[#374151] text-sm font-semibold mb-2">辨证分析</div>
                        <div class="text-[#6B7280] text-sm leading-relaxed">
                            患者长期工作压力大,思虑过度,耗伤气血,气血不足,脑失所养,故见头痛头晕、乏力;舌淡脉细为气血亏虚之象。治以益气养血,安神定志。
                        </div>
                    </div>
                </div>
            </section>

            <!-- 处方信息 -->
            <section class="w-full p-5 rounded-[20px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.06)] bg-white">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-[18px] h-[18px]">
                            <path fill-rule="evenodd" d="M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" clip-rule="evenodd" />
                        </svg>
                        <span class="text-[#333333] text-lg font-bold leading-7">处方信息</span>
                    </div>
                    <span class="px-2.5 py-1 bg-[#10B981] rounded-full text-white text-xs font-bold">已开方</span>
                </div>

                <div class="space-y-3">
                    <!-- 处方名称 -->
                    <div class="p-4 bg-gradient-to-r from-[#F5EBE9] to-[#FCE7E3] rounded-xl">
                        <div class="text-[#8E4337] text-base font-bold mb-1">归脾汤加减</div>
                        <div class="text-[#6B7280] text-xs">益气补血,健脾养心</div>
                    </div>

                    <!-- 处方摘要 -->
                    <div class="p-3 bg-[#F9FAFB] rounded-xl border border-[#E5E7EB]">
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div>
                                <div class="text-[#6B7280] text-xs mb-1">处方类型</div>
                                <div class="text-[#1F2937] font-medium">中药处方</div>
                            </div>
                            <div>
                                <div class="text-[#6B7280] text-xs mb-1">处方剂数</div>
                                <div class="text-[#1F2937] font-medium">7剂</div>
                            </div>
                            <div>
                                <div class="text-[#6B7280] text-xs mb-1">开方时间</div>
                                <div class="text-[#1F2937] font-medium">2025-10-26 14:45</div>
                            </div>
                            <div>
                                <div class="text-[#6B7280] text-xs mb-1">开方医生</div>
                                <div class="text-[#1F2937] font-medium">李时珍</div>
                            </div>
                        </div>
                    </div>

                    <!-- 查看处方详情按钮 -->
                    <button 
                        onclick="viewPrescriptionDetail()"
                        class="w-full py-3 bg-[#8E4337] rounded-lg text-white text-sm font-medium hover:bg-[#6E2F25] transition-colors flex items-center justify-center gap-2"
                        aria-label="查看处方详情">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                            <path d="M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z" />
                            <path fill-rule="evenodd" d="M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" />
                        </svg>
                        查看处方详情
                    </button>
                </div>
            </section>

            <!-- 健康指导 -->
            <section class="w-full p-5 rounded-[20px] shadow-[0px_2px_8px_0px_rgba(0,0,0,0.06)] bg-white">
                <div class="flex items-center gap-2 mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#8E4337" class="w-[18px] h-[18px]">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                    </svg>
                    <span class="text-[#333333] text-lg font-bold leading-7">健康指导</span>
                </div>

                <div class="space-y-2">
                    <div class="flex items-start gap-2">
                        <div class="w-1.5 h-1.5 rounded-full bg-[#8E4337] mt-2 flex-shrink-0"></div>
                        <div class="text-[#6B7280] text-sm leading-relaxed">注意休息,保证每天8小时睡眠,避免熬夜</div>
                    </div>
                    <div class="flex items-start gap-2">
                        <div class="w-1.5 h-1.5 rounded-full bg-[#8E4337] mt-2 flex-shrink-0"></div>
                        <div class="text-[#6B7280] text-sm leading-relaxed">保持心情舒畅,避免情绪波动,学会释放压力</div>
                    </div>
                    <div class="flex items-start gap-2">
                        <div class="w-1.5 h-1.5 rounded-full bg-[#8E4337] mt-2 flex-shrink-0"></div>
                        <div class="text-[#6B7280] text-sm leading-relaxed">饮食清淡,营养均衡,多食用富含铁质的食物</div>
                    </div>
                    <div class="flex items-start gap-2">
                        <div class="w-1.5 h-1.5 rounded-full bg-[#8E4337] mt-2 flex-shrink-0"></div>
                        <div class="text-[#6B7280] text-sm leading-relaxed">适当运动,如散步、太极拳等,增强体质</div>
                    </div>
                    <div class="flex items-start gap-2">
                        <div class="w-1.5 h-1.5 rounded-full bg-[#8E4337] mt-2 flex-shrink-0"></div>
                        <div class="text-[#6B7280] text-sm leading-relaxed">一周后复诊,观察疗效</div>
                    </div>
                </div>
            </section>

        </main>

        <!-- 底部操作栏 -->
        <footer class="w-full  mx-auto fixed bottom-0 left-0 right-0 bg-white border-t border-[#E5E7EB] px-4 py-3 z-40">
            <button 
                onclick="viewMedicalRecord()"
                class="w-full py-3 bg-[#8E4337] rounded-lg text-white text-sm font-medium cursor-pointer hover:bg-[#6E2F25] transition-colors active:scale-98 flex items-center justify-center gap-2"
                aria-label="查看完整病历">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                    <path d="M3 3.5A1.5 1.5 0 014.5 2h6.879a1.5 1.5 0 011.06.44l4.122 4.12A1.5 1.5 0 0117 7.622V16.5a1.5 1.5 0 01-1.5 1.5h-11A1.5 1.5 0 013 16.5v-13z" />
                </svg>
                查看完整病历
            </button>
        </footer>
    </div>

    <script>
        // Toast 提示
        function showToast(message, duration = 2000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // 返回上一页
        function goBack() {
            window.history.back();
        }

        // 切换章节展开/折叠
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const icon = document.getElementById(sectionId + 'Icon');
            
            if (section.classList.contains('expanded')) {
                section.classList.remove('expanded');
                icon.style.transform = 'rotate(-90deg)';
            } else {
                section.classList.add('expanded');
                icon.style.transform = 'rotate(0deg)';
            }
        }

        // 查看图片
        function viewImage(imageSrc) {
            const viewer = document.getElementById('imageViewer');
            const image = document.getElementById('viewerImage');
            image.src = imageSrc;
            viewer.classList.add('active');
        }

        // 关闭图片查看器
        function closeImageViewer() {
            const viewer = document.getElementById('imageViewer');
            viewer.classList.remove('active');
        }

        // 查看完整病历
        function viewMedicalRecord() {
            showToast('正在打开完整病历...');
            setTimeout(() => {
                window.location.href = 'medical-record.html';
            }, 500);
        }

        // 查看处方详情
        function viewPrescriptionDetail() {
            showToast('正在打开处方详情...');
            setTimeout(() => {
                window.location.href = 'prescription-detail.html';
            }, 500);
        }

        // 更多操作
        function showMoreOptions() {
            showToast('更多操作功能开发中');
            // TODO: 显示更多操作菜单
        }
    </script>
</body>
</html>

