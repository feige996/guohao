<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>医生待接单 - 医疗问诊系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Roboto', sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      button:focus-visible,
      a:focus-visible {
        outline: 2px solid #8e4337;
        outline-offset: 2px;
      }

      .toast {
        position: fixed;
        top: 80px;
        left: 50%;
        transform: translateX(-50%) translateY(-100px);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 14px;
        opacity: 0;
        transition: all 0.3s ease;
        z-index: 1000;
        max-width: 300px;
        text-align: center;
      }

      .toast.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }

      .btn-loading {
        position: relative;
        color: transparent !important;
        pointer-events: none;
      }

      .btn-loading::after {
        content: '';
        position: absolute;
        width: 16px;
        height: 16px;
        top: 50%;
        left: 50%;
        margin-left: -8px;
        margin-top: -8px;
        border: 2px solid #ffffff;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spinner 0.6s linear infinite;
      }

      @keyframes spinner {
        to {
          transform: rotate(360deg);
        }
      }

      .tab-active {
        color: #8e4337;
        border-bottom: 2px solid #8e4337;
      }

      /* 模态弹窗 */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .modal-overlay.show {
        opacity: 1;
        pointer-events: auto;
      }

      .modal-content {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.9);
        background: white;
        border-radius: 16px;
        padding: 24px;
        max-width: 320px;
        width: calc(100% - 48px);
        z-index: 1000;
        opacity: 0;
        transition: all 0.3s ease;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
      }

      .modal-overlay.show .modal-content {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      /* 卡片悬停效果 */
      .order-card {
        transition: all 0.3s ease;
      }

      .order-card:active {
        transform: scale(0.98);
      }

      /* 脉动动画 - 紧急订单 */
      @keyframes pulse-urgent {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .urgent-badge {
        animation: pulse-urgent 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      /* 统计数字动画 */
      .stat-number {
        transition: transform 0.3s ease;
      }

      .stat-number:hover {
        transform: scale(1.1);
      }

      /* 标签徽章 */
      .tab-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 18px;
        height: 18px;
        padding: 0 6px;
        background: #ef4444;
        color: white;
        font-size: 11px;
        font-weight: 600;
        border-radius: 9px;
        margin-left: 4px;
      }
    </style>
  </head>
  <body class="bg-[#F9FAFB]">
    <div class="w-full mx-auto min-h-screen relative pb-5">
      <!-- Toast 通知 -->
      <div id="toast" class="toast"></div>

      <!-- 确认弹窗 -->
      <div id="confirmModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content" onclick="event.stopPropagation()">
          <div class="mb-6">
            <h3 id="modalTitle" class="text-lg font-bold text-[#1F2937] text-center mb-3">拒绝接单</h3>
            <p id="modalMessage" class="text-sm text-[#6B7280] text-center leading-relaxed">
              确定拒绝此单吗？拒绝后该订单将继续派给其他医生。
            </p>
          </div>
          <div class="grid grid-cols-2 gap-3">
            <button
              id="modalCancelBtn"
              class="py-3 border-2 border-[#E5E7EB] rounded-lg text-[#6B7280] text-sm font-medium cursor-pointer hover:bg-[#F9FAFB] transition-colors active:scale-98"
              onclick="closeModal()"
              aria-label="取消"
            >
              取消
            </button>
            <button
              id="modalConfirmBtn"
              class="py-3 bg-[#8E4337] rounded-lg text-white text-sm font-medium cursor-pointer hover:bg-[#6E2F25] transition-colors active:scale-98"
              aria-label="确认拒绝"
            >
              确认拒绝
            </button>
          </div>
        </div>
      </div>

      <!-- 顶部导航 -->
      <header
        class="w-full h-[56px] flex justify-between items-center px-4 bg-white fixed top-0 left-0 right-0 mx-auto z-50 shadow-sm"
      >
        <button
          class="text-[#333333] hover:text-[#6B7280] transition-colors"
          onclick="goBack()"
          aria-label="返回上一页"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
            <path
              fill-rule="evenodd"
              d="M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <h1 class="text-[#1F2937] text-lg font-bold">医生待接单</h1>
        <div class="w-6"></div>
      </header>

      <!-- 统计卡片 -->
      <section class="mt-[56px] bg-gradient-to-br from-[#8E4337] via-[#9B4D41] to-[#B85C4F] px-5 py-6 shadow-lg">
        <div class="grid grid-cols-2 gap-4">
          <!-- 待接单统计 -->
          <div
            class="flex flex-col items-center justify-center bg-white/10 backdrop-blur-sm rounded-2xl p-4 hover:bg-white/15 transition-all cursor-pointer"
          >
            <div class="flex items-center justify-center w-12 h-12 bg-white/20 rounded-full mb-3">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-6 h-6">
                <path
                  d="M5.625 3.75a2.625 2.625 0 100 5.25h12.75a2.625 2.625 0 000-5.25H5.625zM3.75 11.25a.75.75 0 000 1.5h16.5a.75.75 0 000-1.5H3.75zM3 15.75a.75.75 0 01.75-.75h16.5a.75.75 0 010 1.5H3.75a.75.75 0 01-.75-.75zM3.75 18.75a.75.75 0 000 1.5h16.5a.75.75 0 000-1.5H3.75z"
                />
              </svg>
            </div>
            <div class="text-white text-4xl font-bold mb-1 stat-number" id="pendingCount">2</div>
            <div class="text-white/90 text-sm font-medium">待接单</div>
          </div>

          <!-- 今日已接统计 -->
          <div
            class="flex flex-col items-center justify-center bg-white/10 backdrop-blur-sm rounded-2xl p-4 hover:bg-white/15 transition-all cursor-pointer"
          >
            <div class="flex items-center justify-center w-12 h-12 bg-white/20 rounded-full mb-3">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="w-6 h-6">
                <path
                  fill-rule="evenodd"
                  d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
            <div class="text-white text-4xl font-bold mb-1 stat-number" id="todayCount">0</div>
            <div class="text-white/90 text-sm font-medium">今日已接</div>
          </div>
        </div>
      </section>

      <!-- 标签页 -->
      <nav class="bg-white px-4 sticky top-[56px] z-40 shadow-sm">
        <div class="flex items-center">
          <button
            id="tab-all"
            class="flex-1 py-3 text-sm font-medium text-[#8E4337] tab-active transition-colors flex items-center justify-center gap-1"
            onclick="switchTab('all')"
            aria-label="全部待接单"
          >
            <span>全部</span>
            <span class="tab-badge" id="badge-all">2</span>
          </button>
          <button
            id="tab-waiting"
            class="flex-1 py-3 text-sm font-medium text-[#6B7280] transition-colors flex items-center justify-center gap-1"
            onclick="switchTab('waiting')"
            aria-label="待响应"
          >
            <span>待响应</span>
            <span class="tab-badge" id="badge-waiting">2</span>
          </button>
          <button
            id="tab-viewed"
            class="flex-1 py-3 text-sm font-medium text-[#6B7280] transition-colors flex items-center justify-center gap-1"
            onclick="switchTab('viewed')"
            aria-label="已拒绝"
          >
            <span>已拒绝</span>
            <span class="tab-badge bg-[#9CA3AF]" id="badge-viewed">0</span>
          </button>
        </div>
      </nav>

      <!-- 订单列表 -->
      <main class="px-4 pt-5 space-y-5" id="orderList">
        <!-- 订单卡片 1 - 超时紧急 -->
        <article
          class="order-card w-full p-5 rounded-[20px] shadow-[0px_4px_12px_0px_rgba(0,0,0,0.05)] bg-white border-2 border-[#FEE2E2] relative overflow-hidden"
        >
          <!-- 紧急标识 -->
          <div class="absolute top-0 right-0 w-20 h-20 -mr-10 -mt-10 bg-[#EF4444] opacity-10 rounded-full"></div>

          <!-- 订单号和状态 -->
          <div class="flex items-center justify-between gap-2 mb-4">
            <span class="text-[#9CA3AF] text-[10px] truncate">DS202510311520257361741750846613</span>
            <div class="flex items-center gap-2">
              <span
                class="px-2 py-0.5 bg-[#FEE2E2] rounded text-[#EF4444] text-[10px] font-bold whitespace-nowrap urgent-badge flex items-center gap-1"
              >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-3 h-3">
                  <path
                    fill-rule="evenodd"
                    d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM8 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"
                    clip-rule="evenodd"
                  />
                </svg>
                超时
              </span>
              <span
                class="px-2.5 py-1 bg-[#FFF7ED] rounded-full text-[#EA580C] text-xs font-bold whitespace-nowrap flex-shrink-0"
                >待响应</span
              >
            </div>
          </div>

          <!-- 患者信息 -->
          <div class="flex items-center gap-3 mb-4">
            <div class="relative">
              <div class="w-14 h-14 rounded-full overflow-hidden flex-shrink-0 ring-2 ring-[#F5EBE9]">
                <img
                  src="https://cdn.pixabay.com/photo/2016/11/29/09/38/adult-1868750_640.jpg"
                  alt="患者"
                  class="w-full h-full object-cover"
                />
              </div>
              <!-- 性别标识 -->
              <div
                class="absolute -bottom-1 -right-1 w-5 h-5 bg-[#EC4899] rounded-full flex items-center justify-center border-2 border-white"
              >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="white" class="w-3 h-3">
                  <path
                    d="M8 1a3.5 3.5 0 0 0-3.5 3.5c0 1.41.84 2.617 2.042 3.165L5.5 9.537a.75.75 0 0 0 .75.75h.214l-.549 3.285a.75.75 0 0 0 1.48.247l.65-3.907h.91l.65 3.907a.75.75 0 0 0 1.48-.247l-.55-3.285h.215a.75.75 0 0 0 .75-.75l-1.042-1.872A3.5 3.5 0 0 0 11.5 4.5 3.5 3.5 0 0 0 8 1Z"
                  />
                </svg>
              </div>
            </div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <span class="text-[#1F2937] text-lg font-bold">GH973212</span>
              </div>
              <span
                class="px-2.5 py-1 bg-gradient-to-r from-[#F5EBE9] to-[#FCE7E3] rounded-lg text-[#8E4337] text-xs font-semibold shadow-sm"
                >体质调理</span
              >
            </div>
          </div>

          <!-- 主诉 - 优化样式 -->
          <div class="mb-4 p-3 bg-[#F9FAFB] rounded-xl border border-[#F3F4F6]">
            <div class="flex items-center gap-1 mb-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="#6B7280" class="w-4 h-4">
                <path d="M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z" />
                <path
                  fill-rule="evenodd"
                  d="M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z"
                  clip-rule="evenodd"
                />
              </svg>
              <span class="text-[#6B7280] text-xs font-semibold">主诉症状</span>
            </div>
            <div class="text-[#1F2937] text-sm leading-relaxed">
              最近感觉身体不适，有轻微头痛和乏力的症状，持续了大约三天左右，想咨询一下医生的建议。
            </div>
          </div>

          <!-- 订单信息 - 卡片式 -->
          <div class="grid grid-cols-3 gap-2 mb-4">
            <div class="bg-gradient-to-br from-[#FFF7ED] to-[#FFEDD5] rounded-xl p-3 text-center">
              <div class="text-[#EA580C] text-xs mb-1 font-medium">金额</div>
              <div class="text-[#EA580C] text-lg font-bold">¥0.01</div>
            </div>
            <div class="bg-[#F9FAFB] rounded-xl p-3 text-center">
              <div class="text-[#6B7280] text-xs mb-1 font-medium">派单</div>
              <div class="text-[#1F2937] text-xs font-bold">10-31<br />15:20</div>
            </div>
            <div class="bg-gradient-to-br from-[#FEE2E2] to-[#FECACA] rounded-xl p-3 text-center">
              <div class="text-[#EF4444] text-xs mb-1 font-medium">剩余</div>
              <div class="text-[#EF4444] text-xs font-bold">已超时<br />4189分</div>
            </div>
          </div>

          <!-- 操作按钮 -->
          <div class="grid grid-cols-2 gap-3">
            <button
              class="py-3 border-2 border-[#E5E7EB] rounded-xl text-[#6B7280] text-sm font-semibold cursor-pointer hover:bg-[#F9FAFB] hover:border-[#D1D5DB] transition-all active:scale-95 flex items-center justify-center gap-1"
              onclick="rejectOrder('DS202510311520257361741750846613')"
              aria-label="暂不接单"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                <path
                  d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"
                />
              </svg>
              暂不接单
            </button>
            <button
              class="py-3 bg-gradient-to-r from-[#8E4337] to-[#6E2F25] rounded-xl text-white text-sm font-semibold cursor-pointer hover:from-[#6E2F25] hover:to-[#5A2520] transition-all active:scale-95 shadow-lg shadow-[#8E4337]/30 flex items-center justify-center gap-1"
              onclick="acceptOrder('DS202510311520257361741750846613', this)"
              aria-label="立即接单"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                />
              </svg>
              立即接单
            </button>
          </div>
        </article>

        <!-- 订单卡片 2 - 正常状态 -->
        <article
          class="order-card w-full p-5 rounded-[20px] shadow-[0px_4px_12px_0px_rgba(0,0,0,0.05)] bg-white border border-[#F3F4F6] hover:border-[#8E4337]/20 transition-all"
        >
          <!-- 订单号和状态 -->
          <div class="flex items-center justify-between gap-2 mb-4">
            <span class="text-[#9CA3AF] text-[10px] truncate">DS202510311520047361740918743373</span>
            <span
              class="px-2.5 py-1 bg-[#FFF7ED] rounded-full text-[#EA580C] text-xs font-bold whitespace-nowrap flex-shrink-0"
              >待响应</span
            >
          </div>

          <!-- 患者信息 -->
          <div class="flex items-center gap-3 mb-4">
            <div class="relative">
              <div class="w-14 h-14 rounded-full overflow-hidden flex-shrink-0 ring-2 ring-[#F5EBE9]">
                <img
                  src="https://cdn.pixabay.com/photo/2016/11/29/09/38/adult-1868750_640.jpg"
                  alt="患者"
                  class="w-full h-full object-cover"
                />
              </div>
              <!-- 性别标识 -->
              <div
                class="absolute -bottom-1 -right-1 w-5 h-5 bg-[#EC4899] rounded-full flex items-center justify-center border-2 border-white"
              >
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="white" class="w-3 h-3">
                  <path
                    d="M8 1a3.5 3.5 0 0 0-3.5 3.5c0 1.41.84 2.617 2.042 3.165L5.5 9.537a.75.75 0 0 0 .75.75h.214l-.549 3.285a.75.75 0 0 0 1.48.247l.65-3.907h.91l.65 3.907a.75.75 0 0 0 1.48-.247l-.55-3.285h.215a.75.75 0 0 0 .75-.75l-1.042-1.872A3.5 3.5 0 0 0 11.5 4.5 3.5 3.5 0 0 0 8 1Z"
                  />
                </svg>
              </div>
            </div>
            <div class="flex-1">
              <div class="flex items-center gap-2 mb-2">
                <span class="text-[#1F2937] text-lg font-bold">GH973212</span>
              </div>
              <span
                class="px-2.5 py-1 bg-gradient-to-r from-[#F5EBE9] to-[#FCE7E3] rounded-lg text-[#8E4337] text-xs font-semibold shadow-sm"
                >体质调理</span
              >
            </div>
          </div>

          <!-- 主诉 - 优化样式 -->
          <div class="mb-4 p-3 bg-[#F9FAFB] rounded-xl border border-[#F3F4F6]">
            <div class="flex items-center gap-1 mb-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="#6B7280" class="w-4 h-4">
                <path d="M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z" />
                <path
                  fill-rule="evenodd"
                  d="M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z"
                  clip-rule="evenodd"
                />
              </svg>
              <span class="text-[#6B7280] text-xs font-semibold">主诉症状</span>
            </div>
            <div class="text-[#1F2937] text-sm leading-relaxed">
              最近感觉身体不适，有轻微头痛和乏力的症状，持续了大约三天左右，想咨询一下医生的建议。
            </div>
          </div>

          <!-- 订单信息 - 卡片式 -->
          <div class="grid grid-cols-3 gap-2 mb-4">
            <div class="bg-gradient-to-br from-[#FFF7ED] to-[#FFEDD5] rounded-xl p-3 text-center">
              <div class="text-[#EA580C] text-xs mb-1 font-medium">金额</div>
              <div class="text-[#EA580C] text-lg font-bold">¥0.01</div>
            </div>
            <div class="bg-[#F9FAFB] rounded-xl p-3 text-center">
              <div class="text-[#6B7280] text-xs mb-1 font-medium">派单</div>
              <div class="text-[#1F2937] text-xs font-bold">10-31<br />15:20</div>
            </div>
            <div class="bg-gradient-to-br from-[#FEE2E2] to-[#FECACA] rounded-xl p-3 text-center">
              <div class="text-[#EF4444] text-xs mb-1 font-medium">剩余</div>
              <div class="text-[#EF4444] text-xs font-bold">已超时<br />4190分</div>
            </div>
          </div>

          <!-- 操作按钮 -->
          <div class="grid grid-cols-2 gap-3">
            <button
              class="py-3 border-2 border-[#E5E7EB] rounded-xl text-[#6B7280] text-sm font-semibold cursor-pointer hover:bg-[#F9FAFB] hover:border-[#D1D5DB] transition-all active:scale-95 flex items-center justify-center gap-1"
              onclick="rejectOrder('DS202510311520047361740918743373')"
              aria-label="暂不接单"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                <path
                  d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"
                />
              </svg>
              暂不接单
            </button>
            <button
              class="py-3 bg-gradient-to-r from-[#8E4337] to-[#6E2F25] rounded-xl text-white text-sm font-semibold cursor-pointer hover:from-[#6E2F25] hover:to-[#5A2520] transition-all active:scale-95 shadow-lg shadow-[#8E4337]/30 flex items-center justify-center gap-1"
              onclick="acceptOrder('DS202510311520047361740918743373', this)"
              aria-label="立即接单"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                />
              </svg>
              立即接单
            </button>
          </div>
        </article>

        <!-- 底部提示 -->
        <div class="text-center py-4">
          <span class="text-[#9CA3AF] text-sm">没有更多了</span>
        </div>
      </main>
    </div>

    <script>
      // Toast 提示
      function showToast(message, duration = 2000) {
        const toast = document.getElementById('toast')
        toast.textContent = message
        toast.classList.add('show')

        setTimeout(() => {
          toast.classList.remove('show')
        }, duration)
      }

      // 按钮加载状态
      function setButtonLoading(button, loading) {
        if (loading) {
          button.classList.add('btn-loading')
          button.disabled = true
        } else {
          button.classList.remove('btn-loading')
          button.disabled = false
        }
      }

      // 返回上一页
      function goBack() {
        window.history.back()
      }

      // 切换标签页
      function switchTab(tab) {
        // 移除所有标签的激活状态
        ;['all', 'waiting', 'viewed'].forEach((t) => {
          const tabElement = document.getElementById(`tab-${t}`)
          tabElement.classList.remove('tab-active', 'text-[#8E4337]')
          tabElement.classList.add('text-[#6B7280]')
        })

        // 激活当前标签
        const currentTab = document.getElementById(`tab-${tab}`)
        currentTab.classList.add('tab-active', 'text-[#8E4337]')
        currentTab.classList.remove('text-[#6B7280]')

        // 这里可以根据标签筛选订单
        showToast(`切换到${tab === 'all' ? '全部待接单' : tab === 'waiting' ? '待响应' : '已拒绝'}`)
      }

      // 打开确认弹窗
      function openModal(orderId) {
        const modal = document.getElementById('confirmModal')
        const confirmBtn = document.getElementById('modalConfirmBtn')

        // 设置确认按钮的点击事件
        confirmBtn.onclick = () => confirmRejectOrder(orderId)

        // 显示弹窗
        modal.classList.add('show')

        // 点击遮罩层关闭
        modal.onclick = () => closeModal()
      }

      // 关闭弹窗
      function closeModal() {
        const modal = document.getElementById('confirmModal')
        modal.classList.remove('show')
      }

      // 确认拒绝订单
      function confirmRejectOrder(orderId) {
        closeModal()
        showToast('已标记为暂不接单')

        setTimeout(() => {
          // 从列表中移除该订单
          const orderCards = document.querySelectorAll('article')
          orderCards.forEach((card) => {
            if (card.textContent.includes(orderId)) {
              card.style.opacity = '0'
              card.style.transform = 'translateX(-20px)'
              card.style.transition = 'all 0.3s ease'

              setTimeout(() => {
                card.remove()
                updateOrderCount()
              }, 300)
            }
          })
        }, 500)
      }

      // 拒绝接单（显示确认弹窗）
      function rejectOrder(orderId) {
        openModal(orderId)
      }

      // 接受订单
      function acceptOrder(orderId, button) {
        setButtonLoading(button, true)
        showToast('正在接单...')

        setTimeout(() => {
          setButtonLoading(button, false)
          showToast('接单成功 ✓')

          setTimeout(() => {
            // 移除该订单卡片
            const orderCards = document.querySelectorAll('article')
            orderCards.forEach((card) => {
              if (card.textContent.includes(orderId)) {
                card.style.opacity = '0'
                card.style.transform = 'translateX(20px)'
                card.style.transition = 'all 0.3s ease'

                setTimeout(() => {
                  card.remove()
                  updateOrderCount()

                  // 如果没有订单了，显示空状态
                  const remainingOrders = document.querySelectorAll('article').length
                  if (remainingOrders === 0) {
                    showEmptyState()
                  }
                }, 300)
              }
            })

            // 更新今日已接数量
            const todayCount = document.getElementById('todayCount')
            todayCount.textContent = parseInt(todayCount.textContent) + 1

            // 跳转到问诊记录页面
            setTimeout(() => {
              window.location.href = 'consultation-records.html'
            }, 800)
          }, 500)
        }, 1500)
      }

      // 更新订单数量
      function updateOrderCount() {
        const orderCards = document.querySelectorAll('article')
        const pendingCount = document.getElementById('pendingCount')
        pendingCount.textContent = orderCards.length
      }

      // 显示空状态
      function showEmptyState() {
        const orderList = document.getElementById('orderList')
        orderList.innerHTML = `
                <div class="flex flex-col items-center justify-center py-16">
                    <div class="w-20 h-20 rounded-full bg-[#F3F4F6] flex items-center justify-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#9CA3AF" class="w-10 h-10">
                            <path d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0016.5 9h-1.875a1.875 1.875 0 01-1.875-1.875V5.25A3.75 3.75 0 009 1.5H5.625z" />
                            <path d="M12.971 1.816A5.23 5.23 0 0114.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 013.434 1.279 9.768 9.768 0 00-6.963-6.963z" />
                        </svg>
                    </div>
                    <h3 class="text-[#1F2937] text-base font-bold mb-2">暂无待接订单</h3>
                    <p class="text-[#6B7280] text-sm">当前没有需要处理的派单</p>
                </div>
            `
      }

      // 页面加载时更新订单数量
      window.addEventListener('DOMContentLoaded', () => {
        updateOrderCount()
      })
    </script>
  </body>
</html>
